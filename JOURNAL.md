<!--
  ===================    !!READ THIS NOTICE!!   ====================
  DO NOT edit this file manually. Your changes WILL BE OVERWRITTEN!
  This journal is auto generated and updated by Hack Club Blueprint.
  To edit this file, please edit your journal entries on Blueprint.
  ==================================================================
-->

## 10/15/2025 - Made a plan  

I decided to scroll through r/mechanicalkeyboards, youtube, and geekhack to find inspiration for my keyboard's layout, mounting style, keycaps, switches, and hardware. 
I settled on a 40% keyboard for portability and also because it looks cute lol. 
I included 5 bindable function or layer keys, to ensure I can still use the same amount of keys a full size keyboard would have, so I'm not stuck without keys such as delete, number keys, function keys, or punctuation. 

I used keyboard-layout-editor.com to make [https://www.keyboard-layout-editor.com/##@@_y:1&w:1.5%3B&=Tab%0AEsc&=Q&=W&=E&=R&=T&=Y&=U&=I&=O&=P&_w:1.5%3B&=Bksp%3B&@_w:1.75%3B&=Ctrl&=A&=S&=D&=F&=G&=H&=J&=K&=L&_w:2.25%3B&=Enter%3B&@=Fn1&_w:1.25%3B&=Shift&=Z&=X&=C&=V&=B&=N&=M&=%3C%0A,&=%3E%0A.&_w:1.75%3B&=%2F%2F%3B&@_x:1.5%3B&=Fn2&=Win&=Alt&_a:7&w:2%3B&=&_w:2%3B&=&_a:4%3B&=Fn3&=Fn4&=Fn5](url) ![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MjM3MywicHVyIjoiYmxvYl9pZCJ9fQ==--38f444afe312360aceabe170876ca5c7f61b7304/image.png)

This layout lets me use a normal keycap set (I'm thinking I'll go with blank PBT keycaps), so I won't have to source custom sized keycaps just for a one-off project. The right spacebar will be space as normal, but the left one will be either backspace or a layer, depending on how I want to use it when I actually build it. 

I also looked through different mounting styles. The top contenders were: 
- gasket mount | the community seems to love this for the sound and feel of the typing experience
- tray mount | easy to implement and manufacture
- gummy o ring mount | makes cases really simple, no bolts needed

I ultimately decided on a gummy o ring mount, because:
- It allows for a nice typing feel and sound
- Simplicity | the case can be one single milled piece rather than gasket mount's two pieces, and I won't need to source any gasket socks or do weird flexy plate manufacturing
- No bolts needed is a big plus, I don't want to unscrew 4-8 bolts every time I need to tweak something inside

After looking through countless reviews and soundtests on reddit, youtube, and geekhack, I decided on the Keygeek Y3 linear switches. I think I'll enjoy linear, plus the community and sound tests show that they produce a very deep sound due to their special stem. They are also very cheap compared to other "quality" switches, at about $2.40 per 10 switches (which means I only need to purchase around $12 of these for my 43 key layout)

For the case, I really like the aesthetic of a single CNC milled piece of 6061 aluminum or polycarbonate. Polycarbonate seems to be about half the price of aluminum through PCBway, plus it is somewhat see through which I think will give a nice effect. 

I want my keyboard to be USB C, so I'm planning to use the HRO TYPE-C-31-M-12 receptacle mounted to the pcb. I might try mounting the receptacle down lower and having a wire connect the pcb and the receptacle if I have time, because a gummy o ring mount could cause issues if the USB receptacle moves too much around without clearance around the plug. 

I also want the pcb to be hotswappable between switches, because I love the idea of being able to change the sound and feel of the keyboard later if I find other switches I think I would enjoy. I'll have to design the pcb to use the classic Kailh hot swap sockets.   

## 10/29/2025 - First try at making a schematic and routing the PCB  

![schem1](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NjUyMiwicHVyIjoiYmxvYl9pZCJ9fQ==--5048a6dd2f906ef014cf409574ac02841c8a3d9a/schem1.png)

I started off actual production of this keyboard by using KiCAD's schematic editor. 
I decided to use an ATmega32U4, but after hearing about some issues this has with QMK firmware, I'm thinking of switching to the STM32f072. 
I then added all of the intermediate circuits such as the decoupling capacitors, the reset switch, ISP header, Crystal, and a special USB-C breakout board connection point. 
I'm using the [Unified Daughterboard](https://unified-daughterboard.github.io/#/) as a breakout USB-C connector, because I want to make the connection point separate from the main PCB. I'll have to use a wire and some special (most likely Molex) connectors to wire the main PCB to the uDB. 

I also made the switch matrix, and then used global tags to connect everything up together in KiCAD. 

![pcb1](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NjUyMywicHVyIjoiYmxvYl9pZCJ9fQ==--110eb2b6b4908cc75cc94cebd7ce6bfd7567412d/pcb1.png)

After finishing the schematic, I moved on to the PCB design. 

I had to assign footprints in KiCAD, making sure I choose hand-solderable components and the right sizes of switches. Something I still have to research is how (and if) I can incorporate the Kailh hot swap pieces into my PCB. 

I laid traces and vias for I think everything, but DRC says I have issues, so I'll check them out tomorrow.   

## 10/30/2025 - Restarted the PCB, routed new PCB  

After doing some research,
- I realized I chose a bad MCU (switching from ATmega32U4 to STM32F072CBT for QMK firmware compatibility)
- I chose the wrong switch symbol/footprint
- I chose the wrong uDB symbol/footprint (which caused some pretty big issues)
- I routed traces very messily

Because of these issues, I thought my PCB was too far in disrepair to try to fix it, so I decided to start from scratch. 

My new PCB uses
- STM32F072CBT as the MCU
- Kailh hotswap socket symbols/footprints
- the correct symbol and footprint for the uDB-S connector, which causes no more issues through KiCAD
- traces routed much much neater

I still need to fix a couple of issues, add the proper Edge.Cuts for my o-ring mounting style, and maybe add a decorative silkscreen layer...

![pcb0](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NjkxMywicHVyIjoiYmxvYl9pZCJ9fQ==--24b73c4879d0697cf7592aa4355fb2dbe39704c9/pcb0.png)

![schem0](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NjkxNCwicHVyIjoiYmxvYl9pZCJ9fQ==--c364b406808629fa7af29ba9ad661d692e75b71a/schem0.png)
  

## 10/31/2025 - Fixed some PCB issues  

I knew I had some issues with my PCB routing from yesterday, so I talked to my resident PCB expert. 

**Here's what was wrong:**
- Laid out capacitors really badly in a daisy chain
- Some capacitors had wrong values
- Decouplinng capacitors were all wired together in the schematic
- Footprints were for hand-soldering components, but I plan to use JLC's PCBA
- AMS1117 is pretty bulky for a 40% board
- No stabilizers
- Differential pair for USB data wasn't routed how a differential pair should be routed

**How I fixed the issues**
- Laid out capacitors close to what they are intended to decouple
- Fixed all capacitor values
- Laid out decoupling capacitors individually/in pairs in the schematic (pictures of new capacitor schematic and layout below)
- Switched to non-hand-soldering components
- Switched to XC6206, which is much smaller and easier to fit on my board (this required I switch C8 and C9 to 1uF instead of 10uF btw)
- Added plate-mount stabilizers (see below)
- Routed differential pair correctly (see below)

**Stabilizers Part 1: Research**
I realized a bit too late that my keyboard was missing stabilizers lol
Firstly, I had to figure out what stabilizers to get, and after some research, I decided on these [Amazon Durock stabilizers](https://www.amazon.com/DUROCK-Stabilizer-Innovative-Pre-clipped-Stabilizers/dp/B0CTHT34MJ/ref=sr_1_5?crid=1ZMBVF26FGWLV&dib=eyJ2IjoiMSJ9.DvmE40T5Ex4sekmzyGAhhN7koVA-8Bv81T4ucaot9j_Akf0dDoQH3iHd61I_vRiQSEgYBPbsM-MHIq-VofpGfHl5Pa4k5-1Z5KNKk8rbB4TlC_oLh0dTz_ECtyppbf6WxU-frjN0QzzeG30VtrC5Sjo82_gu2nQQkjZI5Y1hgoG_OiQ0fKLUUJgVyhXKgnSF.gTH8_1ATgYwqAHWPZnnPBOpwPMJXJfO6WSVxPl_kA6Y&dib_tag=se&keywords=durock%2Bplate%2Bmount%2Bstabilizers%2B2u&qid=1761952953&sprefix=durock%2Bplate%2Bmount%2Bstabilizers%2B2u%2Caps%2C152&sr=8-5&th=1)
However, this stabilizer kit only includes 2u, 6.25u, and 7u stabilizer widths, which is a problem, because my board includes a 2.25u Enter key. 

To fix this, I decided to split the Enter key into a 1u ; or " key plus a 1.25u Enter key. ![image](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NzI3OCwicHVyIjoiYmxvYl9pZCJ9fQ==--ac1717d474a13ea1c5bf0831b9fd7084d364208d/image.png)

So, I had to add another switch and diode to the schematic and PCB layout, but this was a pretty quick fix. 

Now, the only stabilizers I need are 2 2u, which the Amazon listing includes. 

**Stabilizers Part 2: Layout Pain**
When I laid out the double 2u stabilizers on my PCB, there were many many interference issues. Their holes intersected a lot of the traces and components I had laid out already :/

I was forced to move basically every component, including 5 capacitors, the uDB connector, ESD protection circuit, the boot switch, and the new XC6206. 
I did this of course after I learned how to route the differential pair correctly (I'll get to this later), so I had to redo that when I moved the ESD protection and the uDB connector. 
The boot switch is now vertical, and everything on the left side fits nicely due to the small size of the XC6206. 
And after moving some bonus traces and capacitors, everything fit with the stabilizers!

![image](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NzI4MCwicHVyIjoiYmxvYl9pZCJ9fQ==--4a8bbe7fc177ebfb79a20d395d4e46f626e2810d/image.png)


**Routing the Differential Pair**
The USB's D+ and D- lines are considered a Differential Pair, which are just traces that need to have the same length and be routed closely together with no interferences, to avoid data distortion and some other bad stuff. 

Luckily, KiCAD has differential pair routing neatly integrated, all you have to do is press the "6" key while hovering over pads for a differential pair, and it will lay dual traces nicely. 

However, because 99% of the time, traces can't be perfectly straight, the one trace of the pair is longer than the other. Their length needs to be tuned to be the exact same value, which seems really hard to do. Again, KiCAD comes to the rescue, because pressing "9" lets you tune the length of traces in a differential pair to have a difference of 0 trace length. The tuning tool adds a little bit extra trace length to the shorter trace to account for the difference. That's why there's little "bubbles" in my differential pair runs for the USB connector. 

Making the ESD protection circuit mount at 45 degrees also helps get the differential pair runs, the +5V, and GND to route nicer.
![image](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NzI3OSwicHVyIjoiYmxvYl9pZCJ9fQ==--03e62becd9641ecdc79b2aba6ef2421f6167246a/image.png)

Here's a picture of the current schematic and PCB:

![image](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NzI4MSwicHVyIjoiYmxvYl9pZCJ9fQ==--a8b25325f3f20dc9b58f5a9bddb026590c52528d/image.png)
![image](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NzI4MiwicHVyIjoiYmxvYl9pZCJ9fQ==--9a3bae13d08b18c480478ecf9fe5367c04291060/image.png)


The PCB is almost done, so I'll start on the case's CAD soon!  

